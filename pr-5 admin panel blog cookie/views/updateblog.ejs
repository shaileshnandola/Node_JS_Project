<%- include('header') %>

<div class="page-wrapper">
  <div class="page-breadcrumb">
    <div class="row">
      <div class="col-12 d-flex no-block align-items-center">
        <h4 class="page-title">Edit Blog</h4>
        <div class="ms-auto text-end">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item"><a href="/admin/viewblog">View Blogs</a></li>
              <li class="breadcrumb-item active" aria-current="page">Edit Blog</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card">
          <form method="POST" enctype="multipart/form-data" action="/admin/EditBlogdata/<%= blog._id %>">
            <div class="card-body">
              <h4 class="card-title">Edit Blog Details</h4>

              <div class="form-group row mb-3">
                <label class="col-sm-3 text-end control-label col-form-label">Title</label>
                <div class="col-sm-9">
                  <input
                    type="text"
                    name="title"
                    class="form-control"
                    placeholder="Enter blog title"
                    required
                    value="<%= blog.title %>"
                  />
                </div>
              </div>

              <div class="form-group row mb-3">
                <label class="col-sm-3 text-end control-label col-form-label">Author</label>
                <div class="col-sm-9">
                  <input
                    type="text"
                    name="author"
                    class="form-control"
                    placeholder="Author name"
                    required
                    value="<%= blog.author %>"
                  />
                </div>
              </div>

              <div class="form-group row mb-3">
                <label class="col-sm-3 text-end control-label col-form-label">Content</label>
                <div class="col-sm-9">
                  <textarea
                    name="content"
                    class="form-control"
                    rows="5"
                    placeholder="Write blog content here..."
                    required
                  ><%= blog.content %></textarea>
                </div>
              </div>

              <div class="form-group row mb-3">
                <label class="col-sm-3 text-end control-label col-form-label">Current Image</label>
                <div class="col-sm-9 d-flex align-items-center">
                  <% if (blog.image) { %>
                    <img
                      src="/uploads/<%= blog.image %>"
                      alt="Current Blog Image"
                      width="100"
                      height="100"
                      style="object-fit: cover; border-radius: 5px; margin-right: 15px;"
                    />
                  <% } else { %>
                    <span>No image uploaded</span>
                  <% } %>
                </div>
              </div>

              <div class="form-group row mb-3">
                <label class="col-sm-3 text-end control-label col-form-label">Change Image</label>
                <div class="col-sm-9">
                  <input
                    type="file"
                    name="image"
                    class="form-control"
                    accept="image/*"
                  />
                  <small class="form-text text-muted">Leave empty to keep current image</small>
                </div>
              </div>
            </div>

            <div class="border-top">
              <div class="card-body text-end">
                <button type="submit" class="btn btn-primary">Update Blog</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('footer') %>
